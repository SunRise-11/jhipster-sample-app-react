{"remainingRequest":"/Users/julien/workspace/jhipster-automation/samples/jhipster-sample-app-react/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/julien/workspace/jhipster-automation/samples/jhipster-sample-app-react/node_modules/ts-loader/index.js??ref--4-3!/Users/julien/workspace/jhipster-automation/samples/jhipster-sample-app-react/node_modules/tslint-loader/index.js!/Users/julien/workspace/jhipster-automation/samples/jhipster-sample-app-react/src/main/webapp/app/shared/auth/private-route.tsx","dependencies":[{"path":"/Users/julien/workspace/jhipster-automation/samples/jhipster-sample-app-react/src/main/webapp/app/shared/auth/private-route.tsx","mtime":1522786297782},{"path":"/Users/julien/workspace/jhipster-automation/samples/jhipster-sample-app-react/node_modules/react-hot-loader/webpack.js","mtime":1505850161000},{"path":"/Users/julien/workspace/jhipster-automation/samples/jhipster-sample-app-react/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/julien/workspace/jhipster-automation/samples/jhipster-sample-app-react/node_modules/thread-loader/dist/cjs.js","mtime":0},{"path":"/Users/julien/workspace/jhipster-automation/samples/jhipster-sample-app-react/node_modules/ts-loader/index.js","mtime":1521265445000},{"path":"/Users/julien/workspace/jhipster-automation/samples/jhipster-sample-app-react/node_modules/tslint-loader/index.js","mtime":1519899048000}],"contextDependencies":[],"result":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar react_redux_1 = require(\"react-redux\");\nvar react_router_dom_1 = require(\"react-router-dom\");\nvar react_jhipster_1 = require(\"react-jhipster\");\nexports.PrivateRouteComponent = function (_a) {\n    var Component = _a.component, isAuthenticated = _a.isAuthenticated, isAuthorized = _a.isAuthorized, _b = _a.hasAnyAuthorities, hasAnyAuthorities = _b === void 0 ? [] : _b, rest = tslib_1.__rest(_a, [\"component\", \"isAuthenticated\", \"isAuthorized\", \"hasAnyAuthorities\"]);\n    var checkAuthorities = function (props) {\n        return isAuthorized ? (React.createElement(Component, tslib_1.__assign({}, props))) : (React.createElement(\"div\", { className: \"insufficient-authority\" },\n            React.createElement(\"div\", { className: \"alert alert-danger\" },\n                React.createElement(react_jhipster_1.Translate, { contentKey: \"error.http.403\" }, \"You are not authorized to access this page.\"))));\n    };\n    var renderRedirect = function (props) {\n        return isAuthenticated ? (checkAuthorities(props)) : (React.createElement(react_router_dom_1.Redirect, { to: {\n                pathname: '/login',\n                search: props.location.search,\n                state: { from: props.location }\n            } }));\n    };\n    if (!Component)\n        throw new Error(\"A component needs to be specified for private route for path \" + rest.path);\n    return React.createElement(react_router_dom_1.Route, tslib_1.__assign({}, rest, { render: renderRedirect }));\n};\nexports.hasAnyAuthority = function (authorities, hasAnyAuthorities) {\n    if (authorities && authorities.length !== 0) {\n        if (hasAnyAuthorities.length === 0) {\n            return true;\n        }\n        return hasAnyAuthorities.some(function (auth) { return authorities.includes(auth); });\n    }\n    return false;\n};\nvar mapStoreToProps = function (_a, _b) {\n    var _c = _a.authentication, isAuthenticated = _c.isAuthenticated, account = _c.account;\n    var _d = _b.hasAnyAuthorities, hasAnyAuthorities = _d === void 0 ? [] : _d;\n    return ({\n        isAuthenticated: isAuthenticated,\n        isAuthorized: exports.hasAnyAuthority(account.authorities, hasAnyAuthorities)\n    });\n};\n/**\n * A route wrapped in an authentication check so that routing happens only when you are authenticated.\n * Accepts same props as React router Route.\n * The route also checks for authorization if hasAnyAuthorities is specified.\n */\nexports.PrivateRoute = react_redux_1.connect(mapStoreToProps, null, null, { pure: false })(exports.PrivateRouteComponent);\nexports.default = exports.PrivateRoute;\n",{"version":3,"file":"/Users/julien/workspace/jhipster-automation/samples/jhipster-sample-app-react/src/main/webapp/app/shared/auth/private-route.tsx","sourceRoot":"","sources":["/Users/julien/workspace/jhipster-automation/samples/jhipster-sample-app-react/node_modules/tslint-loader/index.js!/Users/julien/workspace/jhipster-automation/samples/jhipster-sample-app-react/src/main/webapp/app/shared/auth/private-route.tsx"],"names":[],"mappings":";;;AAAA,6BAA+B;AAC/B,2CAAsC;AACtC,qDAAmD;AACnD,iDAA2C;AAU9B,QAAA,qBAAqB,GAAG,UAAC,EAMjB;IALnB,IAAA,wBAAoB,EACpB,oCAAe,EACf,8BAAY,EACZ,yBAAsB,EAAtB,2CAAsB,EACtB,gGAAO;IAEP,IAAM,gBAAgB,GAAG,UAAA,KAAK;QAC5B,OAAA,YAAY,CAAC,CAAC,CAAC,CACb,oBAAC,SAAS,uBAAK,KAAK,EAAI,CACzB,CAAC,CAAC,CAAC,CACF,6BAAK,SAAS,EAAC,wBAAwB;YACrC,6BAAK,SAAS,EAAC,oBAAoB;gBACjC,oBAAC,0BAAS,IAAC,UAAU,EAAC,gBAAgB,kDAAwD,CAC1F,CACF,CACP;IARD,CAQC,CAAC;IAEJ,IAAM,cAAc,GAAG,UAAA,KAAK;QAC1B,OAAA,eAAe,CAAC,CAAC,CAAC,CAChB,gBAAgB,CAAC,KAAK,CAAC,CACxB,CAAC,CAAC,CAAC,CACF,oBAAC,2BAAQ,IACP,EAAE,EAAE;gBACF,QAAQ,EAAE,QAAQ;gBAClB,MAAM,EAAE,KAAK,CAAC,QAAQ,CAAC,MAAM;gBAC7B,KAAK,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,QAAQ,EAAE;aAChC,GACD,CACH;IAVD,CAUC,CAAC;IAEJ,IAAI,CAAC,SAAS;QAAE,MAAM,IAAI,KAAK,CAAC,kEAAiE,IAAY,CAAC,IAAM,CAAC,CAAC;IAEtH,OAAO,oBAAC,wBAAK,uBAAK,IAAI,IAAE,MAAM,EAAE,cAAc,IAAI,CAAC;AACrD,CAAC,CAAC;AAEW,QAAA,eAAe,GAAG,UAAC,WAAqB,EAAE,iBAA2B;IAChF,IAAI,WAAW,IAAI,WAAW,CAAC,MAAM,KAAK,CAAC,EAAE;QAC3C,IAAI,iBAAiB,CAAC,MAAM,KAAK,CAAC,EAAE;YAClC,OAAO,IAAI,CAAC;SACb;QACD,OAAO,iBAAiB,CAAC,IAAI,CAAC,UAAA,IAAI,IAAI,OAAA,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,EAA1B,CAA0B,CAAC,CAAC;KACnE;IACD,OAAO,KAAK,CAAC;AACf,CAAC,CAAC;AAEF,IAAM,eAAe,GAAG,UAAC,EAAgD,EAAE,EAA0B;QAA1E,sBAA4C,EAA1B,oCAAe,EAAE,oBAAO;QAAQ,yBAAsB,EAAtB,2CAAsB;IAAO,OAAA,CAAC;QACzG,eAAe,iBAAA;QACf,YAAY,EAAE,uBAAe,CAAC,OAAO,CAAC,WAAW,EAAE,iBAAiB,CAAC;KACtE,CAAC;AAHwG,CAGxG,CAAC;AAEH;;;;GAIG;AACU,QAAA,YAAY,GAAG,qBAAO,CAAC,eAAe,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC,6BAAqB,CAAC,CAAC;AAEzG,kBAAe,oBAAY,CAAC","sourcesContent":["import * as React from 'react';\nimport { connect } from 'react-redux';\nimport { Route, Redirect } from 'react-router-dom';\nimport { Translate } from 'react-jhipster';\n\nexport interface IPrivateRouteProps {\n  component: any;\n  isAuthenticated: boolean;\n  isAuthorized: boolean;\n  hasAnyAuthorities?: string[];\n  [key: string]: any;\n}\n\nexport const PrivateRouteComponent = ({\n  component: Component,\n  isAuthenticated,\n  isAuthorized,\n  hasAnyAuthorities = [],\n  ...rest\n}: IPrivateRouteProps) => {\n  const checkAuthorities = props =>\n    isAuthorized ? (\n      <Component {...props} />\n    ) : (\n      <div className=\"insufficient-authority\">\n        <div className=\"alert alert-danger\">\n          <Translate contentKey=\"error.http.403\">You are not authorized to access this page.</Translate>\n        </div>\n      </div>\n    );\n\n  const renderRedirect = props =>\n    isAuthenticated ? (\n      checkAuthorities(props)\n    ) : (\n      <Redirect\n        to={{\n          pathname: '/login',\n          search: props.location.search,\n          state: { from: props.location }\n        }}\n      />\n    );\n\n  if (!Component) throw new Error(`A component needs to be specified for private route for path ${(rest as any).path}`);\n\n  return <Route {...rest} render={renderRedirect} />;\n};\n\nexport const hasAnyAuthority = (authorities: string[], hasAnyAuthorities: string[]) => {\n  if (authorities && authorities.length !== 0) {\n    if (hasAnyAuthorities.length === 0) {\n      return true;\n    }\n    return hasAnyAuthorities.some(auth => authorities.includes(auth));\n  }\n  return false;\n};\n\nconst mapStoreToProps = ({ authentication: { isAuthenticated, account } }, { hasAnyAuthorities = [] }) => ({\n  isAuthenticated,\n  isAuthorized: hasAnyAuthority(account.authorities, hasAnyAuthorities)\n});\n\n/**\n * A route wrapped in an authentication check so that routing happens only when you are authenticated.\n * Accepts same props as React router Route.\n * The route also checks for authorization if hasAnyAuthorities is specified.\n */\nexport const PrivateRoute = connect(mapStoreToProps, null, null, { pure: false })(PrivateRouteComponent);\n\nexport default PrivateRoute;\n"]}]}